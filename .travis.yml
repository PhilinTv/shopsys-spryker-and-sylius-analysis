language: php

sudo: true

php:
  - 7.1

before_install:
    # Spryker required extensions
  # Redis is pre-installed on Travis, just enable it
  - echo "extension = redis.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini

  # Add sury repo
#  - sudo add-apt-repository ppa:ondrej/php -y # "-y" for skipping "Enter" reuqired message
#  - sudo apt-get update

  # Install other required etensions
  - sudo apt-get install php-gmp
  - sudo apt-get install php-bz2

  # Debug: current config
  - php-config --configure-options

install:
  - composer install

  # prepare projects
  - composer download-shopsys
  - composer download-sylius
  - composer download-spryker

script:
  # check coding standard of this project
  - composer check-cs
  - composer phpstan

  # statistics
  - bin/run analyze
  - bin/run ecs
  - bin/run phpstan

notifications:
  email: never
